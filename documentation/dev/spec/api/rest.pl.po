# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2013-01-30 10:09+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title #
#, no-wrap
msgid "agent/server protocol"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "The disadvantage of the current situation"
msgstr ""

#. type: Plain text
msgid ""
"For the moment, the communication exchange between the agent and the server "
"is inherited from OCS Inventory.  Basically, the server POST XML over HTTP "
"to server and get answer in XML. The XML has a unusual structure similar to "
"the one generated by XML::Simple.  The agent get the parameters from the "
"server during a first contact (the prolog). This query is done once, after "
"that every module are launch in a row and are supposed to have enough "
"information to do the job."
msgstr ""

#. type: Plain text
msgid ""
"During the last year we developed what was supposed to be an abstraction "
"layer on top of this. This lib cost us a lot of time and energy for very "
"poor advantage."
msgstr ""

#. type: Title ##
#, no-wrap
msgid "The proposal"
msgstr ""

#. type: Title ###
#, no-wrap
msgid "Introduction"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "URL"
msgstr ""

#. type: Plain text
msgid ""
"The agent will sent its first query to $URL like usual by with a GET and a "
"POST"
msgstr ""

#. type: Plain text
#, no-wrap
msgid ""
"* $URL: the server URL, for example,\n"
"    http://glpiserver/glpi/plugins/fusioninventory?action=getConfig&&machineid=$machineid\n"
"* $machineid: the machine ID\n"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "The URL format"
msgstr ""

#. type: Plain text
msgid "This is the recommend URL format:"
msgstr ""

#. type: Plain text
#, no-wrap
msgid "    http://server/glpi/plugins/fusioninventory/$task?action=$action&machineid=$machineid\n"
msgstr ""

#. type: Bullet: '* '
msgid "$action: the method name"
msgstr ""

#. type: Bullet: '* '
msgid "$machineid: the machine uniq ID"
msgstr ""

#. type: Bullet: '* '
msgid "$protocol: the protocol revision used, unused for the moment"
msgstr ""

#. type: Bullet: '* '
msgid ""
"additional can be added, it's also possible to push more information through "
"a HTTP POST"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "Error handling"
msgstr ""

#. type: Plain text
msgid "We reuse HTTP error code (400, 500, etc)."
msgstr ""

#. type: Title ##
#, no-wrap
msgid "Initial contact: /?action=getConfig"
msgstr ""

#. type: Plain text
msgid "The config $task will replace the prolog. It goal is:"
msgstr ""

#. type: Bullet: '* '
msgid "inform the agent when each task must be launched or disabled"
msgstr ""

#. type: Bullet: '* '
msgid "when the next /config request must be done"
msgstr ""

#. type: Title ###
#, no-wrap
msgid "Request"
msgstr ""

#. type: Plain text
msgid ""
"To request a new config, the agent use the getConfig method. It also needs "
"to declare what modules are avalaible on this URL: http://server/glpi/"
"plugins/fusioninventory/?action=getConfig&machineid=$machineid&task"
"[Inventory]=2.18&task[SNMPQuery]=1.3&task[ESX]=1.0.1"
msgstr ""

#. type: Bullet: '* '
msgid "$action: getConfig, the name of the method"
msgstr ""

#. type: Bullet: '* '
msgid "$machineid: machineid"
msgstr ""

#. type: Bullet: '* '
msgid "$task: a key/value array with the modules and their version"
msgstr ""

#. type: Title ###
#, no-wrap
msgid "Answer"
msgstr ""

#. type: Plain text
msgid ""
"Only module in the 'tasks' list are enabled. In this example netdiscovery "
"and snmpquery are turned off. Deploy will be run every 600 second and the "
"inventory task will be started every 10 hours.  The global section is a hash "
"of settings. Here 'global' is defined to give the root directory of the "
"server."
msgstr ""

#. type: Plain text
#, no-wrap
msgid ""
"    {\n"
"       \"schedule\" : [\n"
"          {\n"
"             \"periodicity\" : 3600,                     ← time to wait between to call\n"
"             \"delayStartup\" : 600,                   ← time to wait before the first startup, default is now+periodicity\n"
"             \"task\" : \"Inventory\",                        ← Task name\n"
"             \"remote\" : \"https://server1/plugins/fusioninventory/b\"   ← Remote backend URL to contact\n"
"          },\n"
"          {\n"
"             \"periodicity\" : 600,\n"
"             \"task\" : \"Deploy\",\n"
"             \"remote\" : \"https://server2/deploy\"\n"
"          },\n"
"          {\n"
"             \"periodicity\" : 700,\n"
"             \"task\" : \"ESX\",\n"
"             \"remote\" : \"https://server1/plugins/fusioninventory/b\"\n"
"          },\n"
"          {\n"
"             \"periodicity\" : 5600,\n"
"             \"task\" : \"Inventory\",\n"
"             \"remote\" : \"https://server1/plugins/fusinvinventory/b\"\n"
"          },\n"
"          {\n"
"             \"periodicity\" : 5600,\n"
"             \"task\" : \"FooBarAMQPService\",\n"
"             \"remote\" : \"amqp://server1/plugins/fusinvinventory/b\" ← draft for an AMQP interface\n"
"          }\n"
"       ],\n"
msgstr ""

#. type: Plain text
#, no-wrap
msgid ""
"       \"httpd\" : {\n"
"          \"ip\" : \"0.0.0.0\",\n"
"          \"trust\" : [\n"
"             \"127.0.0.1\"\n"
"          ],\n"
"          \"port\" : 62354\n"
"       },\n"
"       \"configValidityPeriod\" : 600,   ← How long the agent should keep this configuration\n"
"       \"requireSSLClientCert\" : 1 ← 1 if the agent must ask a SSL cert to the server, in this case it will request a cert from the server See: http://forge.fusioninventory.org/projects/fusioninventory-agent/wiki/API-REST-strong-SSL-support \n"
"    }\n"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "/wait"
msgstr ""

#. type: Plain text
msgid ""
"Sometime, it's important for the server to be able to contact the agent "
"immediately. For example to request installation at a given time. The method "
"so far is to use the port 62354 when the agent is behind a NAT connection or "
"a firewall is not possible to use this method"
msgstr ""

#. type: Plain text
msgid "The /wait task will be used to keep the agent connected when need."
msgstr ""

#. type: Plain text
msgid ""
"http://server/glpi/plugins/fusioninventory?action=wait&machineid=$machineid"
msgstr ""

#. type: Plain text
msgid ""
"The server will send a '@' character to the agent every 25 secondes to keep "
"the connection open. This character has to be ignored by the agent.  If the "
"connection get closed, the agent will retry a connection with the server at "
"a random moment between the disconnection and 10 minutes after. This in "
"order to preserve the server resource. When the server need to awake the "
"agent it will sent such JSON structure:"
msgstr ""

#. type: Plain text
#, no-wrap
msgid ""
"    {\n"
"       \"awake\" : {\n"
"          \"tasks\" : [\n"
"             \"ocsdeploy\",\n"
"             \"inventory\"\n"
"          ]\n"
"       }\n"
"    }\n"
msgstr ""

#. type: Plain text
msgid ""
"In this example, the server asks the agent to run the ocsdeploy task "
"followed by the inventory."
msgstr ""

#. type: Title ##
#, no-wrap
msgid "Transition"
msgstr ""

#. type: Plain text
msgid ""
"We must keep the compatiblity with the OCS agent. To do so, we need to "
"continue to accept agent on the legacy backend (/ocsinventory)."
msgstr ""

#. type: Plain text
msgid "The legacy agents will continue to use the /ocsinventory back as usual."
msgstr ""

#. type: Plain text
msgid "The goal here is to migrate the following modules to the REST protocol:"
msgstr ""

#. type: Bullet: '* '
msgid "snmpquery"
msgstr ""

#. type: Bullet: '* '
msgid "netdiscovery"
msgstr ""

#. type: Plain text
msgid ""
"The ocsdeploy module will continue to use the legacy interface. This because "
"there is no plan to use it from GLPI."
msgstr ""

#. type: Title ###
#, no-wrap
msgid "Inventory"
msgstr ""

#. type: Plain text
msgid ""
"This is a special case. We want to remains compatible with OCS Inventory.  "
"The module works this way: We use the OCS/XML backend in these cases:"
msgstr ""

#. type: Plain text
#, no-wrap
msgid ""
"* If the /config gives an errro (HTTP code != 200).\n"
"*If inventory is not in the list returned by inventory\n"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "Example"
msgstr ""

#. type: Plain text
msgid "This is an example of server/agent exchange."
msgstr ""

#. type: Bullet: '* '
msgid "agent create a deviceid"
msgstr ""

#. type: Bullet: '* '
msgid ""
"agent contact the server (/config) to know each tash must be started and when"
msgstr ""

#. type: Bullet: '* '
msgid "agent planify the tashs executions"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "Advantages"
msgstr ""

#. type: Bullet: '* '
msgid ""
"Easy to redirect requests to a third party applications. For example, data "
"to http://server/glpi/plugins/fusioninventory/toto can be redirected to a "
"third party application writen in Python simply throught a webserver "
"configuration"
msgstr ""

#. type: Bullet: '* '
msgid ""
"Easy to use YAML to send inventories : better performances especially where "
"we currenlty have big XML files"
msgstr ""

#. type: Bullet: '* '
msgid ""
"Easy to make evolutions on some parts of the communication process. For the "
"moment, it's something that is badly missing"
msgstr ""

#. type: Bullet: '* '
msgid "Server can be debbuged using a simple browser"
msgstr ""

#. type: Bullet: '* '
msgid "Test suites will be simplier to implement and maintain"
msgstr ""

#. type: Bullet: '* '
msgid ""
"The whole FusionInventory::Agent::XML could be, in the mid term, moved to "
"the modules that need it"
msgstr ""

#. type: Title ##
#, no-wrap
msgid "Questions / Other"
msgstr ""

#. type: Bullet: '* '
msgid ""
"Guillaume suggested to use a similar mechanism for the agent internal web "
"server."
msgstr ""

#. type: Bullet: '* '
msgid ""
"If may be interesting to extend the /config to pass a full configuration "
"tree to the agent."
msgstr ""
