# how to configure SSL

## Unix

The following command allows to generate a self-signed certificate/key pair:

    $ openssl req -new -newkey rsa:1024 -days 730 -nodes -x509 -keyout server.key -out server.crt
    Generating a 1024 bit RSA private key
    ......++++++
    ...............++++++
    writing new private key to 'server.key'
    -----
    You are about to be asked to enter information that will be incorporated
    into your certificate request.
    What you are about to enter is what is called a Distinguished Name or a DN.
    There are quite a few fields but you can leave some blank
    For some fields there will be a default value,
    If you enter '.', the field will be left blank.
    -----
    Country Name (2 letter code) [GB]:FR
    State or Province Name (full name) [Berkshire]:Ile de France
    Locality Name (eg, city) [Newbury]:Paris
    Organization Name (eg, company) [My Company Ltd]:
    Organizational Unit Name (eg, section) []:
    Common Name (eg, your name or your server's hostname) []:glpi.mycompany.com
    Email Address []:

CAUTION: you have to ensure the exact host name in your server URL matches the
certificate Common Name attribute. For instance, if your servier URL is
http(s)://glpi.mycompany.com/, the common name should be 'glpi.mycompany.com'.

This will generate two files, server.key and server.crt. The first one is the
server key, and is the private part allowing the server to prove its identity.
The second one is the server certificate, and is the public part allowing other
piece of software to check the server identity.

You have to copy those file somewhere in your system configuration:

     # install -m 600 server.key /etc/pki/tls/private/server.key
     # install -m 644 server.crt /etc/pki/tls/certs/server.crt

Then you need to modify Apache configuration, through SSLCertificateFile and
SSLCertificateKeyFile directives:

     # yum install mod_ssl
     # vi /etc/httpd/conf.d/ssl.conf

Then you have to restart the server:

     # service httpd reload

The certificate can now be used by the agent as certification authority
(`--ca-cert-file server.crt`).
